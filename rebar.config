{sub_dirs, []}.
{cover_enabled, true}.
{erl_opts, [debug_info, warnings_as_errors]}.
{edoc_opts, [{dir, "doc"}]}.
%% {eunit_opts, [{report,{eunit_surefire,[{dir,"."}]}}]}.

{plugins, [pc]}.

{artifacts,
 ["priv/bin_nif.so",
  "priv/aggr_nif.so",
  "priv/trans_nif.so",
  "priv/comb_nif.so"]}.

{port_specs,
 [
  {"priv/bin_nif.so",   ["c_src/bin_nif.c",  "c_src/dec_conv.c", "c_src/dec_math.c"]},
  {"priv/trans_nif.so", ["c_src/trans_nif.c",  "c_src/dec_conv.c", "c_src/dec_math.c"]},
  {"priv/aggr_nif.so",  ["c_src/aggr_nif.c", "c_src/dec_conv.c", "c_src/dec_math.c"]},
  {"priv/comb_nif.so",  ["c_src/comb_nif.c", "c_src/dec_conv.c", "c_src/dec_math.c"]}
 ]}.

{port_env,
 [
  {"CFLAGS", "-O4 -std=c99"},
  {"solaris", "CFLAGS",
   "-std=c99 -DSOLARIS"} %% Omitting $CFLAGS is deliberate, there is a bug with that on solaris
 ]}.

{provider_hooks,
  [{post,
    [{compile, {pc, compile}},
     {clean, {pc, clean}}]}]}.

{profiles,
 [{lint,  [{plugins, [{rebar3_lint, {git, "https://github.com/project-fifo/rebar3_lint.git", {tag, "0.1.4"}}}]}]},
  {eqc,
[
%%{erl_opts, [debug_info, warnings_as_errors, {parse_transform, eqc_cover}]},
    %%{eqc_opts, [{numtests, 1000}]},
    {plugins, [rebar3_eqc]}]}]}.
